Проектная работа

Цель: создание рабочего проекта соответстующего следующим требованиям:

    веб проект с развертыванием нескольких виртуальных машин;
    включен https;
    основная инфраструктура в DMZ зоне;
    файрвалл на входе;
    сбор метрик и настроенный алертинг;
    везде включен selinux;
    организован централизованный сбор логов;
    организован backup.

  Для проверки представляю Vagrantfile, который разворачивает восемь ВМ на основе образа centos/stream8, из них 2 роутера (IR и CR)
и 6 серверов (SrvWeb, SrvBackup, SrvDB, SrvRep, SrvLog, SrvApp). Так-же ансибловский playbook.yaml с помошью которого производится
доустановка необходимых пакетов и донастройка инфраструктуры стенда.
  Стенд имеет единую точку входа/выхода (за исключением интерфейсов для подключения vagrant по ssh) в интернет через интерфейс eth0 
на IR интерфейс eth0 закрыт iptables+nat, также через данный интерфейс настрое форвард 443 порта на внутренний SrvWeb (ip 192.168.0.2)  
на host машине это порт 4433 (по пока не выясненной причине проброс порта в конфигурации Vagrantfile srv.vm.network 'forwarded_port', guest: 443, host: 443, protocol: 'tcp'
работает). На сервере SrvWeb поднят nginx с вебинтерфейсом от сервера Zabbix. Для демонстрации работы https использую самоподписной сертификат. 
Сам сервер Zabbix мониторящий данный стенд поднят на SrvApp взаимодействует с БД PostgreSQL на сервере SrvDB. Сервер SrvDB имеет slave реплику SrvRep, а также бэкапится
при помощи Barman на SrvBackup. Логи со всего стенда при помощи Rsyslog-а пишутся на SrvLog + локально на серверах.
  Между IR и CR поднят bond. 
  На всех серверах активирован SELinux в режиме enforcing.

P.S.: большего моя железка не сохла потянут :( .
  По таймингу развертывание стенда:
    vagrant-ом ~ 15 мин.
    ansible-ом ~ 45 мин. (есле не зависнет)
    восстановление одной удаленной ВМ в рабочем стенде ~ 15 мин. 

